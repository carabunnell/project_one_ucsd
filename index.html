<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talk Geeky To Me</title>
    <link href="https://fonts.googleapis.com/css?family=Fontdiner+Swanky|Lexend+Deca&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="assets/style.css">



    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

</head>

<body>
    <div style="background-image: url(assets/images/elvish.png)" class="body">
        <image class="img-logo" src="assets/images/logo.png" alt="logo">

            <div class="wrapper">
                <article class="img-info">
                    <h1>Geeky Language Translator</h1>
                    <!-- <button>Your Text</button> -->
                    <span><input id="yourtext" type="text" placeholder="Your text..."></span>
                    <!--language select and translate button-->
                    <!--Select a language-->
                    <!-- <div><button>Select Language</button> -->
                    <!-- <input type="text" placeholder="Your selected language"></div> -->
                    <select id="dropDown" data-target="dropdown2" class="btn dropdown-trigger user-choice"
                        value="choice">
                        <option>Select</option>
                        <option value="Dothraki">Dothraki</option>
                        <option value="Elvish">Elvish</option>
                        <option value="Valley Girl">Valley Girl</option>
                        <option value="Sith">Sith</option>
                        <option value="Yodish">Yodish</option>
                        <option value="Valyrian">Valyrian</option>
                        <!-- <option value="example1">Ex1</option> -->
                    </select>
            </div>
            <div>
                <!-- <button class="buttons" id="translate-dothraki">Translate To Dothraki</button>
                    <button class="buttons" id="translate-elvish">Translate to Elvish (Sindarin)</button> -->
                <button class="buttons" id="translate-all">Translate</button>
                <h3>Your Translation: </h3>
                <div class="translated-output"></div>

                <button class="buttons fbsharelink" id="translate-all" data-shareurl="YOURLINK">Share on Facebook</button>

                <!-- <input class="interact" style="width: 95%; height: 300px;"> -->
                </article>
                <img class="img-child" src="assets/images/child.png" alt="baby geeky child">
            </div>


            <footer>
                <h5>Copyright &#169; 2020 UCSD Extension Talk Geeky To Me Gang</h5>
                <button onClick="fbshareCurrentPage()" target="_blank" alt="Share on Facebook">Facebook</button>


    </div>
    </footer>
    </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script language="javascript">
        function fbshareCurrentPage()
        {window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(window.location.href)+"&t="+document.title, '', 
        'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');
        return false; }
    </script>
    <script>


        $(document).ready(function () {
            $("#translate-all").on("click", function () {
                var userInput = $("#yourtext").val();
                var languageChoice = $(".user-choice").val();
                console.log(languageChoice);

                // ajaxtranslate("https://elvish.p.rapidapi.com/sindarin.json?text=", userInput, "elvish.p.rapidapi.com");

                if (languageChoice === "Elvish") {
                    console.log("we did it!");
                    ajaxtranslate("https://elvish.p.rapidapi.com/sindarin.json?text=", userInput, "elvish.p.rapidapi.com");
                }
                else if (languageChoice === "Valley Girl") {
                    console.log("we did it!");
                    ajaxtranslate("https://valspeak.p.rapidapi.com/valspeak.json?text=", userInput, "valspeak.p.rapidapi.com");
                }
                else if (languageChoice === "Sith") {
                    console.log("we did it!");
                    ajaxtranslateSith("https://sith.p.rapidapi.com/sith.json?text=", userInput, "sith.p.rapidapi.com");
                }
                else if (languageChoice === "Yodish") {
                    console.log("we did it!");
                    ajaxtranslate("https://yodish.p.rapidapi.com/yoda.json?text=", userInput, "yodish.p.rapidapi.com");
                }
                else if (languageChoice === "Valyrian") {
                    ajaxtranslate("https://valyrian.p.rapidapi.com/valyrian.json?text=", userInput, "valyrian.p.rapidapi.com")
                }
                // else if (languageChoice === "")


                function ajaxtranslate(queryURL, userInput, xhost) {
                    var queryURL2 = queryURL + userInput;
                    console.log("queryURL2: " + queryURL);
                    console.log("userInput: " + userInput);
                    console.log("xhost: " + xhost);

                    $.ajax({
                        url: queryURL2,
                        method: "POST",
                        headers: {
                            "x-rapidapi-host": xhost,
                            "x-rapidapi-key": "f14b75ccd4msh0f111102ae02ed1p12818bjsn7f3dca89ed3e",
                            "content-type": "application/x-www-form-urlencoded"
                        }
                    }).then(function (response) {
                        $(".translated-output").empty();
                        var newDiv = $("<div>");
                        newDiv.addClass("translate-box");
                        newDiv.text(JSON.stringify(response.contents.translated));
                        // newDiv.addClass("_____"); // give it a class
                        $(".translated-output").append(newDiv);
                        console.log('response-one: ' + JSON.stringify(response.contents.translated));
                    });
                }

                function ajaxtranslateSith(queryURL, userInput, xhost) {
                    var queryURL2 = queryURL + userInput;
                    console.log("queryURL2: " + queryURL);
                    console.log("userInput: " + userInput);
                    console.log("xhost: " + xhost);

                    $.ajax({
                        url: queryURL2,
                        method: "GET",
                        headers: {
                            "x-rapidapi-host": xhost,
                            "x-rapidapi-key": "f14b75ccd4msh0f111102ae02ed1p12818bjsn7f3dca89ed3e",
                            // "content-type": "application/x-www-form-urlencoded"
                        }
                    }).then(function (response) {
                        $(".translated-output").empty();
                        var newDiv = $("<div>");
                        newDiv.addClass("translate-box");
                        newDiv.text(JSON.stringify(response.contents.translated));
                        // newDiv.addClass("_____"); // give it a class
                        $(".translated-output").append(newDiv);
                        console.log('response-one: ' + JSON.stringify(response.contents.translated));
                    });
                }

            });

            // <a class="fbsharelink" data-shareurl="YOURLINK">Facebook</a>

            $(".fbsharelink").on("click", function () {
                var shareurl = document.URL;
                window.open('https://www.facebook.com/sharer/sharer.php?u=' + escape(shareurl) + '&t=' + document.title, '',
                    'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=300,width=600');
                // return false;
            });

        });


    </script>
</body>

</html>